# Dashboard Directory Configuration
DirectoryIndex router.php

# Rewrite direct file access to router
RewriteEngine On
RewriteBase /dashboard/

# Redirect direct PHP file access (except API files) to router
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{REQUEST_FILENAME} \.php$
RewriteCond %{REQUEST_URI} !^/dashboard/(get_dashboard_stats|get_notifications_count|check_session)\.php$ [NC]
RewriteCond %{REQUEST_URI} !^/dashboard/router\.php$ [NC]
RewriteRule ^(.*)\.php$ router.php?route=$1 [L,QSA]

# Allow direct access to API/utility files
<FilesMatch "^(get_dashboard_stats|get_notifications_count|check_session)\.php$">
    Order allow,deny
    Allow from all
</FilesMatch>

# Security: Prevent direct access to sensitive files
<Files "*.sql">
    Order allow,deny
    Deny from all
</Files>

<Files "*.log">
    Order allow,deny
    Deny from all
</Files>
